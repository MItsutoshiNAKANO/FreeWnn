#
# $Id: Makefile.in,v 1.1 2000-01-16 05:35:32 ura Exp $
#

# FreeWnn is a network-extensible Kana-to-Kanji conversion system.
# Makefile for pubdic dictionaries
# 
# Copyright Kyoto University Research Institute for Mathematical Sciences
#                 1987, 1988, 1989, 1990, 1991, 1992
# Copyright OMRON Corporation. 1987, 1988, 1989, 1990, 1991, 1992, 1999
# Copyright ASTEC, Inc. 1987, 1988, 1989, 1990, 1991, 1992
#
# Author: OMRON SOFTWARE Co., Ltd. <freewnn@rd.kyoto.omronsoft.co.jp>
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with GNU Emacs; see the file COPYING.  If not, write to the
# Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#
# Commentary:
#
# Change log:
#
# Last modified date: 8,Feb.1999
#

#
#   Do simply 'make' for normal cases.
#   Do 'make project', if your site participates in the PUBDIC project.
#

ATOD=atod
ATOF=atof
HINSI=hinsi.data
FZK_SRC=fzk.master fzk.attr fzk.jirattr fzk.fzkattr fzk.jircon fzk.con fzk.shuutan
FZK_FLAG=

dic=\
	kihon.dic \
	setsuji.dic \
	jinmei.dic \
	chimei.dic \
	koyuu.dic \
	special.dic \
	computer.dic \
	bio.dic \
	symbol.dic \
	tankan.dic

more=\
	kihon.more \
	setsuji.more \
	jinmei.more \
	chimei.more \
	koyuu.more \
	special.more \
	computer.more \
	bio.more \
	symbol.more \
	tankan.more

all: full.fzk kougo.fzk std.fzk $(dic)

project: all $(more)

clean:
	rm -f *.fzk *.dic *.more

std.fzk: $(FZK_SRC)
	/lib/cpp $(FZK_FLAG) fzk.master | egrep -v '^(# |$$)' | $(ATOF) $@

full.fzk: $(FZK_SRC)
	make FZK_FLAG=-DKANSAI std.fzk
	mv std.fzk $@

kougo.fzk: $(FZK_SRC)
	make FZK_FLAG=-DKOUGO std.fzk
	mv std.fzk $@

.SUFFIXES: .hd .u .dic .more

.u.dic:
	cat $*.hd $< | $(ATOD) -p Version -P Version $@

.hd.more:
	$(ATOD) $@ < $<

$(dic): $(HINSI)
